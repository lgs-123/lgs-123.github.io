<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>焕新数字图书展销平台</title>
    <link rel="stylesheet" href="1.css">
</head>
<body>
    <div class="header">
        <div class="nav">
            <div class="logo">焕新图书</div>
            <div class="menu">
                <a href="#">首页</a>
                <a href="#">小说</a>
                <a href="#">科技</a>
                <a href="#">历史</a>
                <a href="#">文学</a>
            </div>
            <div class="user-area">
                <button>登录</button>
                <button>注册</button>
                <button class="cart-btn">
                    购物车
                    <span class="cart-count">0</span>
                </button>
            </div>
        </div>
    </div>
    
    <!-- 购物车弹窗 -->
    <div class="cart-modal" id="cartModal">
        <div class="close-cart" id="closeCart">×</div>
        <h3>我的购物车</h3>
        <div class="cart-items" id="cartItems">
            <div class="empty-cart">购物车是空的，快去添加图书吧~</div>
        </div>
        <div class="cart-total" id="cartTotal">
            <span>总计：</span>
            <span>¥0.00</span>
        </div>
        <button class="checkout-btn">结算</button>
    </div>
    
    <div class="container">
        <div class="sidebar">
            <h3>图书分类导航</h3>
            <ul>
                <li><a href="#">小说</a></li>
                <li><a href="#">历史</a></li>
                <li><a href="#">文学</a></li>
                <li><a href="#">艺术</a></li>
                <li><a href="#">哲学</a></li>
                <li><a href="#">科技</a></li>
                <li><a href="#">经济</a></li>
                <li><a href="#">教育</a></li>
                <li><a href="#">医学</a></li>
                <li><a href="#">军事</a></li>
            </ul>
        </div>
        
        <div class="main">
            <div class="search-bar">
                <input type="text" placeholder="搜索图书名称、作者..." id="searchInput">
                <button id="searchBtn">搜索</button>
            </div>
            
            <div class="search-results" id="searchResults">
                <p>搜索结果：找到与 "<span id="searchKeyword"></span>" 相关的 <span id="resultCount">0</span> 本图书</p>
            </div>
            
            <div class="banner">
                <div class="banner-slides" id="bannerSlides">
                    <div class="banner-slide">
                        <img src="https://picsum.photos/800/300?random=10" alt="图书促销 banner">
                        <div class="promo-text">
                            <h2>书香节狂欢</h2>
                            <p>全场图书5折起，满200减100，限时3天！</p>
                        </div>
                    </div>
                    <div class="banner-slide">
                        <img src="https://picsum.photos/800/300?random=11" alt="新书上市 banner">
                        <div class="promo-text">
                            <h2>新书上市季</h2>
                            <p>每月精选50本新书，首发享7折优惠</p>
                        </div>
                    </div>
                    <div class="banner-slide">
                        <img src="https://picsum.photos/800/300?random=12" alt="会员专享 banner">
                        <div class="promo-text">
                            <h2>会员专享</h2>
                            <p>开通会员每月免费领取2本精选图书</p>
                        </div>
                    </div>
                </div>
                <div class="banner-controls" id="bannerControls">
                    <div class="banner-dot active" data-index="0"></div>
                    <div class="banner-dot" data-index="1"></div>
                    <div class="banner-dot" data-index="2"></div>
                </div>
            </div>
            
            <div class="filter">
                <button class="active">全部图书</button>
                <button>小说</button>
                <button>科技</button>
                <button>历史</button>
                <button>文学</button>
                <button>艺术</button>
                <button>哲学</button>
            </div>
            
            <div class="new-books">
                <h3>新书上市 <a href="#">查看更多→</a></h3>
                <div class="books-list">
                    <div class="book-item" data-book="1">
                        <div class="book-img">
                            <img src="https://picsum.photos/200/300?random=1" alt="Web开发书籍">
                        </div>
                        <div class="book-info">
                            <h4>零基础入门学习Web开发</h4>
                            <span class="price">¥59.00</span>
                        </div>
                    </div>
                    <div class="book-item" data-book="2">
                        <div class="book-img">
                            <img src="https://picsum.photos/200/300?random=2" alt="设计思维书籍">
                        </div>
                        <div class="book-info">
                            <h4>设计思维工具手册</h4>
                            <span class="price">¥45.00</span>
                        </div>
                    </div>
                    <div class="book-item" data-book="3">
                        <div class="book-img">
                            <img src="https://picsum.photos/200/300?random=3" alt="数据分析书籍">
                        </div>
                        <div class="book-info">
                            <h4>数据分析基础与案例实战</h4>
                            <span class="price">¥68.00</span>
                        </div>
                    </div>
                    <div class="book-item" data-book="4">
                        <div class="book-img">
                            <img src="https://picsum.photos/200/300?random=4" alt="历史书籍">
                        </div>
                        <div class="book-info">
                            <h4>全球通史：从史前到现代</h4>
                            <span class="price">¥79.00</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="discount">
            <h3>活动期间优惠</h3>
            <ul>
                <li><span class="icon">★</span>全场图书满100减30,满200减80,多买多减</li>
                <li><span class="icon">★</span>新用户注册即送20元优惠券,可叠加使用</li>
                <li><span class="icon">★</span>每日签到领取积分,积分可兑换图书</li>
                <li><span class="icon">★</span>会员专享8折优惠,还可参与限量秒杀</li>
                <li><span class="icon">★</span>购买套装图书额外赠送精美书签</li>
            </ul>
            <div class="promo-book" data-book="5">
                <img src="https://picsum.photos/200/300?random=5" alt="瓦尔登湖促销">
                <div class="info">
                    <h4>瓦尔登湖</h4>
                    <span class="price">¥2.98</span>
                    <span class="origin-price">¥8.80</span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 图书详情弹窗 -->
    <div class="modal" id="bookModal">
        <div class="modal-content">
            <div class="close-btn" id="closeModal">×</div>
            <div class="book-detail" id="bookDetail">
                <!-- 详情内容由JS动态填充 -->
            </div>
        </div>
    </div>
    
    <script>
        // 图书数据（模拟）
        const bookData = {
            1: {
                title: "零基础入门学习Web开发",
                author: "张三",
                price: "¥59.00",
                desc: "本书从HTML、CSS基础开始，逐步深入到JavaScript、React等前端技术，通过大量实战案例帮助零基础读者快速掌握Web开发技能。适合大学生、转行人员及编程爱好者阅读。",
                img: "https://picsum.photos/200/300?random=1"
            },
            2: {
                title: "设计思维工具手册",
                author: "李四",
                price: "¥45.00",
                desc: "设计思维是创新的核心方法，本书系统介绍了设计思维的五大阶段及常用工具，通过企业案例解析如何运用设计思维解决商业问题，提升产品竞争力。",
                img: "https://picsum.photos/200/300?random=2"
            },
            3: {
                title: "数据分析基础与案例实战",
                author: "王五",
                price: "¥68.00",
                desc: "涵盖Python数据分析库（Pandas、Matplotlib等）的使用方法，结合电商、金融等行业案例，讲解数据清洗、可视化、建模全流程，让读者具备实战能力。",
                img: "https://picsum.photos/200/300?random=3"
            },
            4: {
                title: "全球通史：从史前到现代",
                author: "赵六",
                price: "¥79.00",
                desc: "以全球视角梳理人类文明发展脉络，分析各大文明的兴衰与互动，帮助读者理解历史规律与当代世界格局的形成，是一部兼具学术性与可读性的通史著作。",
                img: "https://picsum.photos/200/300?random=4"
            },
            5: {
                title: "瓦尔登湖",
                author: "梭罗",
                price: "¥2.98",
                desc: "梭罗独居瓦尔登湖畔两年的生活记录，探讨自然、简朴与精神自由的关系，文字清新隽永，充满哲思，是美国文学及自然主义的经典之作。",
                img: "https://picsum.photos/200/300?random=5"
            }
        };

        // 购物车数据
        let cart = [];

        // 打开图书详情弹窗
        function openBookModal(bookId) {
            const modal = document.getElementById('bookModal');
            const detailContainer = document.getElementById('bookDetail');
            const book = bookData[bookId];
            if (book) {
                detailContainer.innerHTML = `
                    <div class="detail-img">
                        <img src="${book.img}" alt="${book.title}">
                    </div>
                    <div class="detail-info">
                        <h2>${book.title}</h2>
                        <span class="author">作者：${book.author}</span>
                        <span class="price">${book.price}</span>
                        <p class="desc">${book.desc}</p>
                        <button class="buy-btn" onclick="addToCart('${bookId}')">加入购物车</button>
                    </div>
                `;
                modal.classList.add('active');
            }
        }

        // 关闭图书详情弹窗
        function closeBookModal() {
            document.getElementById('bookModal').classList.remove('active');
        }

        // 添加到购物车
        function addToCart(bookId) {
            const book = bookData[bookId];
            if (book) {
                // 检查购物车中是否已有该商品
                const existingItem = cart.find(item => item.id === bookId);
                if (existingItem) {
                    existingItem.quantity++;
                } else {
                    cart.push({
                        id: bookId,
                        title: book.title,
                        price: book.price,
                        img: book.img,
                        quantity: 1
                    });
                }
                updateCart();
                closeBookModal();
                alert('已添加到购物车！');
            }
        }

        // 更新购物车显示
        function updateCart() {
            const cartItems = document.getElementById('cartItems');
            const cartTotal = document.getElementById('cartTotal');
            const cartCount = document.querySelector('.cart-count');
            
            // 更新购物车数量标记
            const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
            cartCount.textContent = totalItems;
            
            // 更新购物车内容
            if (cart.length === 0) {
                cartItems.innerHTML = '<div class="empty-cart">购物车是空的，快去添加图书吧~</div>';
                cartTotal.innerHTML = '<span>总计：</span><span>¥0.00</span>';
                return;
            }
            
            let html = '';
            let total = 0;
            
            cart.forEach(item => {
                const price = parseFloat(item.price.replace('¥', ''));
                const itemTotal = price * item.quantity;
                total += itemTotal;
                
                html += `
                    <div class="cart-item">
                        <img src="${item.img}" alt="${item.title}">
                        <div class="cart-item-info">
                            <h4>${item.title}</h4>
                            <div class="cart-item-price">${item.price} × ${item.quantity}</div>
                        </div>
                        <div class="cart-item-remove" onclick="removeFromCart('${item.id}')">×</div>
                    </div>
                `;
            });
            
            cartItems.innerHTML = html;
            cartTotal.innerHTML = `<span>总计：</span><span>¥${total.toFixed(2)}</span>`;
        }

        // 从购物车移除
        function removeFromCart(bookId) {
            cart = cart.filter(item => item.id !== bookId);
            updateCart();
        }

        // 轮播图功能
        let currentSlide = 0;
        const slides = document.getElementById('bannerSlides');
        const dots = document.querySelectorAll('.banner-dot');
        const slideCount = dots.length;

        function goToSlide(index) {
            currentSlide = index;
            slides.style.transform = `translateX(-${currentSlide * 100}%)`;
            
            // 更新指示点
            dots.forEach((dot, i) => {
                if (i === currentSlide) {
                    dot.classList.add('active');
                } else {
                    dot.classList.remove('active');
                }
            });
        }

        // 自动轮播
        let slideInterval = setInterval(() => {
            currentSlide = (currentSlide + 1) % slideCount;
            goToSlide(currentSlide);
        }, 5000);

        // 点击指示点切换轮播
        dots.forEach(dot => {
            dot.addEventListener('click', () => {
                clearInterval(slideInterval);
                goToSlide(parseInt(dot.getAttribute('data-index')));
                // 重新开始自动轮播
                slideInterval = setInterval(() => {
                    currentSlide = (currentSlide + 1) % slideCount;
                    goToSlide(currentSlide);
                }, 5000);
            });
        });

        // 搜索功能
        document.getElementById('searchBtn').addEventListener('click', performSearch);
        document.getElementById('searchInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                performSearch();
            }
        });

        function performSearch() {
            const input = document.getElementById('searchInput');
            const keyword = input.value.trim().toLowerCase();
            const resultsEl = document.getElementById('searchResults');
            const keywordEl = document.getElementById('searchKeyword');
            const countEl = document.getElementById('resultCount');
            
            if (keyword === '') {
                resultsEl.classList.remove('active');
                return;
            }
            
            // 简单搜索逻辑
            let count = 0;
            Object.values(bookData).forEach(book => {
                if (book.title.toLowerCase().includes(keyword) || 
                    book.author.toLowerCase().includes(keyword) ||
                    book.desc.toLowerCase().includes(keyword)) {
                    count++;
                }
            });
            
            keywordEl.textContent = keyword;
            countEl.textContent = count;
            resultsEl.classList.add('active');
        }

        // 绑定图书点击事件
        document.querySelectorAll('.book-item, .promo-book').forEach(item => {
            item.addEventListener('click', () => {
                const bookId = item.getAttribute('data-book');
                openBookModal(bookId);
            });
        });

        // 绑定关闭按钮事件
        document.getElementById('closeModal').addEventListener('click', closeBookModal);

        // 点击弹窗外部关闭
        document.getElementById('bookModal').addEventListener('click', (e) => {
            if (e.target === document.getElementById('bookModal')) {
                closeBookModal();
            }
        });

        // 购物车弹窗控制
        document.querySelector('.cart-btn').addEventListener('click', () => {
            document.getElementById('cartModal').classList.add('active');
        });

        document.getElementById('closeCart').addEventListener('click', () => {
            document.getElementById('cartModal').classList.remove('active');
        });

        // 筛选按钮切换效果
        document.querySelectorAll('.filter button').forEach(btn => {
            btn.addEventListener('click', () => {
                document.querySelectorAll('.filter button').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
            });
        });

        // 初始化购物车
        updateCart();
    </script>
</body>
</html>